<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <link rel="stylesheet" href="css/index.css">
    </head>
    <body>
        <div class="father">
            名称：
            <div class="">
                <input class='inputValue' type="text" name="" value="">
                <div class='reminder'></div>
            </div>
            <button class='verify' type="button">验证</button>
        </div>
        <script src='js/reset.js'></script>
        <script>
            var reminder = e('.reminder')
            var inputValue = e('.inputValue')
            // 拆分添加html的函数
            var insertHTML = function(color, r) {
                html = `<span style='color: ${color}'>${r}</span>`
                reminder.innerHTML = html
                // 给边框加上颜色
                inputValue.style.border = `1px solid ${color}`
            }
            // 判断长度
            function getByteLen(val) {
                var len = 0;
                for (var i = 0; i < val.length; i++) {
                    var length = val.charCodeAt(i);
                    if (length >= 0 && length <= 128) {
                        len += 1;
                    } else {
                        len += 2;
                    }
                }
                return len;
            }
            // 匹配是否符合条件
            var matchValue = function(value) {
                var html = ''
                var len = getByteLen(value)
                log('len', len)
                if(len < 4 || len > 16) {
                    if(value == '') {
                        var r = '姓名不能为空'
                        insertHTML('red', r)
                    } else {
                        var r = '必填，长度为4～16个字符串'
                        insertHTML('#808A87', r)
                    }
                } else {
                    var r = '名称格式正确'
                    insertHTML('green', r)
                }
            }
            // 添加click事件
            var bindClick = function() {
                var btn = e('.verify')
                //绑定事件
                btn.addEventListener('click', function() {
                    log('in click')
                    var value = inputValue.value
                    matchValue(value)
                })
            }
            var bindAll = function() {
                bindClick()
            }
            var __main = function() {
                bindAll()
            }
            __main()
        </script>
        <script>
        // 任务目的
        // 加强对JavaScript的掌握
        // 熟悉常用表单处理逻辑
        // 任务描述
        // 如示例图中所示，在页面中实现一个输入框与按钮，要求点击验证按钮后，对输入框中内容进行格式校验，并在其下方显示校验结果
        // 校验规则：
        // 1.字符数为4~16位
        // 2.每个英文字母、数字、英文符号长度为1
        // 3.每个汉字，中文符号长度为2
        </script>
    </body>
</html>
